{% extends 'base.html' %}
{% load static %}
{% block title %}Profile{% endblock %}
{% block content %}

  <div class="row mt-5">
    <div class="col-md-3 col-sm-6">
      <a href="{ url 'post-list' %}" class="btn btn-light">Back to Posts</a>
    </div>
  </div>

  
  <div class="row justify-content-center mt-5" >
    <div class="col-md-8 col-sm-12 border px-5 pt-3">
      <div class="text-center">
        <h1 class="row justify-content-center mt-3">User Profile</h1> 
        <h5>{{ profile }}</h5>  
        <h6>


          <a href="{ url 'list-followers' profile.pk %}" class="post-link">Followers: {{ number_of_followers }}</a>&nbsp;&nbsp; 
          <a href="{ url 'list-followings' profile.pk %}" class="post-link">Following: {{ number_of_followings }}</a>&nbsp;&nbsp;
          <!-- <a href="#" class="post-link">Following: {{ number_of_followings }}</a>&nbsp;&nbsp; -->


        <!--   <b> following : </b>
          <p class="text-muted"> {{ author.following.count }} </p>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <b> followers : </b>
          <p class="text-muted"> {{ author.followers.count }} </p> -->


         <!--  <div class="level-item has-text-centered">
            <div>
              <p class="heading">Following</p>
              <a href="{ url 'list-followings' profile.pk %}"><p class="title">{{ following_count }}</p></a>
            </div>
          </div>
          <div class="level-item has-text-centered">
            <div>
              <p class="heading">Followers</p>
              <p class="title">{{ followers_count }}</p>
            </div>
          </div> -->


          {% if request.user == user %}
            <a href="{% url 'edit_profile_page' request.user.profile.pk %}">Edit Profile Page</a> &nbsp;&nbsp; 
            <a href="{% url 'edit_profile' request.user.profile.pk %}">Edit User Settings</a>
            <p>Date Joined: {{ user.date_joined }}</p>
          {% endif %}
        </h6>
      </div>
      <div class="text-center">
        {% if profile.picture %}
          <img src="{{ profile.picture.url }}" class="rounded-circle" width="100" height="100">
        {% else %}
          <img src="{% static 'powerbuilding/images/profile_pictures/default_pic.jpg' %}" class="rounded-circle" width="100" height="100">
        {% endif %}
      </div>
      <!-- <div class="col-md-10"> -->
        <div class="card-body">
          <div class="text-center">
            <h5 class="card-title">{% if profile.first_name %}{{ profile.first_name }}{% endif %} {% if profile.last_name %}{{ profile.last_name }}{% endif %} </h5>
            <p class="small text-muted">
              {% if profile.website_url %}
                <a target="_blank" href="{{ profile.website_url }}">Website</a>  
              {% endif %}
              {% if profile.facebook_url %}
                | <a target="_blank" href="{{ profile.facebook_url }}">Facebook</a> 
              {% endif %}
              {% if profile.twitter_url %} 
                | <a target="_blank" href="{{ profile.twitter_url }}">Twitter</a> 
              {% endif %}
              {% if profile.instagram_url %} 
                | <a target="_blank" href="{{ profile.instagram_url }}">Instagram</a> 
              {% endif %}
              {% if profile.pinterest_url %} 
                | <a target="_blank" href="{{ profile.pinterest_url }}">Pinterest</a> 
              {% endif %}
              <br>
              {% if profile.location %}
              <p>Location: {{ profile.location }}</p>
              {% endif %}

              {% if profile.birth_date %}
              <p>Birthday: {{ profile.birth_date }}</p>
              {% endif %}

              {% if user == request.user %}
              {% else %}
                {% if is_following %}
                  <form method="POST" action="{% url 'remove-follower' profile.pk %}">
                    {% csrf_token %}
                    <button class="btn btn-outline-danger" type="submit">Unfollow</button>
                  </form>
                {% else %}
                  <form method="POST" action="{% url 'add-follower' profile.pk %}">
                    {% csrf_token %}
                    <button class="btn btn-outline-success" type="submit">Follow</button>
                  </form>
                {% endif %}
              {% endif %}


           <!--    {if user == request.user %}
              { else %}
                { if user in author.following.all %}
                  <a href="{ url 'followToggle' author=author.user.pk  %}" class="btn btn-primary">Unfollow</a>
                { else %}
                  <a href="{ url 'followToggle' author=author.user.pk  %}" class="btn btn-primary"> Follow </a>
                { endif %}
              { endif %} -->

             <!--  { if user == request.user %}
              { else %}
                <div class="media-right">
                  { if follow_status == True %}
                    <a href="{ url 'follow' profile.user 0 %}" class="button is-danger">Unfollow</a>
                  { else %}
                    <a href="{ url 'follow' profile.user 1 %}" class="button is-success">Follow</a>
                  { endif  %}
                </div>
              { endif %} -->



            </p>  
            <p class="card-text">{{ profile.bio }}</p>
            <!-- <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p> -->
          </div>
        </div>
      <!-- </div> -->
    </div>
  </div>
  <div class="row justify-content-center mt-3 mb-5"><div class="col-md-5 col-sm-12"><div class="flexbox-item-99"><div class="header-info2">
    <h2>{{ user.username }} Posts</h2>
    <h4><a href="{% url 'show_shared_profile_page' user.profile.pk %}">{{ user.username }} Shared Posts</a></h4>
    <h5>Click on a Post to View Comments!</h5>
  </div></div></div></div>


{% endblock %}